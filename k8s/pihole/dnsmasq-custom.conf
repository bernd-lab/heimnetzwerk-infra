# Custom dnsmasq configuration for Kubernetes Pod Network
# Allows DNS queries from Kubernetes Pod Network (10.244.0.0/16)

# Accept queries from Kubernetes Pod Network
local=/k8s.local/
interface=cni0
bind-interfaces=false

# Allow queries from Kubernetes Pod Network CIDR
# This allows pods in the cluster to query Pi-hole
local-service=false

# Trusted network: Kubernetes Pod Network
# This prevents dnsmasq from ignoring queries from 10.244.0.0/16
trust-anchor=.,20326,8,2,E06D44B80B8F1D39A95C0B0D7C65D08458E880409BBC683457104237C7F8EC8D

